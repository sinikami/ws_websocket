<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>React App</title>
    <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
            crossorigin="anonymous"></script>
    <link href="css/chatCss.css" type="text/css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>

<body>

<div id="main">
    <div id="info">
        <div id="chat" class="panel panel-primary">
            <ul class="panel-body">

            </ul>
            <div class="panel-footer">
                <input class="form-control" id="chatMsg" type="text" value="" placeholder="chatting message"/>
                <button class="btn btn-default" id="sendMsg"> Send</button>
            </div>

        </div>
        <div id="user_list" class="panel panel-primary">
            <ul class="panel-body">

            </ul>
            <div id="setting" align="right" class="panel-footer">
                <p> UserName : <input type="text" id="userId" placeholder="UserName" value=""/></p>
                <p> Message : <input type="text" id="message" placeholder="Declaration of victory" value=""/></p>
                <button class="btn btn-default" id="login">Setting</button>
                <!--button>Logout</button-->
            </div>
        </div>
    </div>
    <div align="right" id="create_room">
        <button class="btn btn-default" id="create">Create a room</button>
        <input type="text" id="roomName" class="form-control" placeholder="Room Name" value=""/>

    </div>
    <div id="room_list" class="well">


    </div>

</div>
<div id="play" class="modal fade bs-example-modal-sm" tabindex="-1" data-backdrop="static" role="dialog"
     aria-labelledby="myLargeModalLabel">
    <div class="modal-dialog modal-lg" role="document">

        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Play Game</h4>
            </div>
            <div class="modal-body">
                <div id="sense" style="height: 300px">

                </div>
                <div>
                    <button class="btn btn-default">Leave</button>
                    <button class="btn btn-default">Invite</button>
                    <button class="btn btn-default">R</button>
                    <button class="btn btn-default">P</button>
                    <button class="btn btn-default">S</button>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="js/bundle.js"></script>
<script src="js/client.js"></script>

</body>
<script>
    /////////
    var Event = window.attachEvent || window.addEventListener;
    var chkevent = window.attachEvent ? 'onbeforeunload' : 'beforeunload'; /// make IE7, IE8 compatible

    Event(chkevent, function (e) { // For >=IE7, Chrome, Firefox

        var confirmationMessage = ' ';  // a space
        (e || window.event).returnValue = confirmationMessage;

        return confirmationMessage;
    });


    //////
    var url = 'ws://192.168.25.61:9000';
    //var url = 'ws://127.0.0.1:9000';
    $(document).ready(function () {
        var client = new WS(url);
        var fun = {
            open: function (obj, message) {
                console.log(message)
                obj.getRooms()
            }
            ,
            message: function (obj, message) {
                console.log(message);
                obj.showMessage(message.data);
            }
        }
        client.connect(fun);


        $('#userId').val('User@' + Math.floor(Math.random() * 10000));
        $('#roomName').val('Room@' + Math.floor(Math.random() * 10000));
        $('#login').click(function () {
            var userName = $('#userId').val();
            var msg = $('#message').val();
            if (userId.length == 0) {
                alert("이름을 입력하세요!")
                return;
            }
            client.login(userName, msg)
        })
        $('#logout').click(function () {
            client.logout();
        })

        $('#create').click(function () {
            var roomName = $('#roomName').val();

            if (roomName.length == 0) {
                alert("roomName 을 입력하세요!")
                return;
            }
            client.createRoom(roomName);
        })
        $('#sendMsg').click(function () {
            var msg = $('#chatMsg').val();
            if (msg.length == 0) {
                alert("메시지를 입력하세요.");
                $('#chatMsg').focus()
                return
            }
            client.chat(msg);
        })
        $('#chatMsg').on('keyup', function (event) {
            if (event.which == 13) {
                $('#sendMsg').click()
            }

        })

    })


</script>

<!--<script>
    if ('registerElement' in document
        && 'createShadowRoot' in HTMLElement.prototype
        && 'import' in document.createElement('link')
        && 'content' in document.createElement('template')) {
        // We're using a browser with native WC support!
    } else {
        document.write('<script src="https:\/\/cdnjs.cloudflare.com/ajax/libs/polymer/0.3.4/platform.js"><\/script>')
    }
</script>-->
</html>
